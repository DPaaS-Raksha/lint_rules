<!-- This file is automatically generated by `cv doc`. Do not edit directly. -->

Pods must define architecture-based node affinity. Without it, the scheduler may repeatedly attempt to schedule a Pod on an unsupported node where it will never start.


### Related Links
* [NodeAffinity](https://playbook.cloudpaklab.ibm.com/adding-a-nodeselector-label/)

### Linter Rule
**PodHasArchBasedNodeAffinity** - Pods must define architecture-based node affinity.

#### Severity
ERROR


#### Passing Examples

**Example: Pod with correct arch-based node affinity defined**

_pod.yaml (rendered from test default)_:

    spec:
      affinity:
        nodeAffinity:
          requiredDuringSchedulingIgnoredDuringExecution:
            nodeSelectorTerms:
            - matchExpressions:
              - key: kubernetes.io/arch
      containers: []
    

<hr>


#### Failing Examples

**Example: Pod with no arch-based node affinity**

_pod.yaml (rendered from test default)_:

    spec:
      affinity:
        nodeAffinity:
          requiredDuringSchedulingIgnoredDuringExecution: {}
      containers: []
    



Messages:
* `[ERROR] pod.yaml: one of ["beta.kubernetes.io/arch" "kubernetes.io/arch"] at some spec.affinity.nodeAffinity.requiredDuringSchedulingIgnoredDuringExecution.nodeSelectorTerms[i].matchExpressions[j].key not defined for architecture-based node affinity (PodHasArchBasedNodeAffinity)`
<hr>

**Example: Pod with wrong arch-based node affinities defined**

_pod.yaml (rendered from test default)_:

    spec:
      affinity:
        nodeAffinity:
          requiredDuringSchedulingIgnoredDuringExecution:
            nodeSelectorTerms:
            - matchExpressions:
              - key: some-value
              - key: some-other-value
              - key: yet-another-value
            - matchExpressions:
              - key: some-value
              - key: some-other-value
              - key: yet-another-value
      containers: []
    



Messages:
* `[ERROR] pod.yaml: one of ["beta.kubernetes.io/arch" "kubernetes.io/arch"] at some spec.affinity.nodeAffinity.requiredDuringSchedulingIgnoredDuringExecution.nodeSelectorTerms[i].matchExpressions[j].key not defined for architecture-based node affinity (PodHasArchBasedNodeAffinity)`
<hr>

#### Keywords
* [Miscellaneous](../standards/Miscellaneous.md)
* NodeAffinity
